<!DOCTYPE html>
<html lang="ko" dir="ltr">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css">
    <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
    <script src="http://code.jquery.com/jquery-latest.js"></script> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
	<div class="sidebar">
		<div class="logo-details">
			<i class='bx bx-user icon'></i>
				<div class="logo_name">XXX님</div>
				<i class='bx bx-menu' id="btn" ></i>
		</div>
		<ul class="nav-list">
			<li>
				<button onclick="javascript:doShow1()">
					<i class='bx bx-door-open'></i>
					<span class="links_name">냉장고 내부</span>
				</button>
				<span class="tooltip">냉장고 내부</span>
			</li>
			<li>
				<button onclick="javascript:doShow2()">
					<i class='bx bx-grid-alt'></i>
					<span class="links_name">메뉴 추천</span>
				</button>
				<span class="tooltip">메뉴추천</span>
			</li>
			<li class="out">
                <div class="out-details">
					<div class="name_out">
						<div class="name">메인으로 돌아가기</div>
					</div>
				</div>
				<a href="../index.html"><i class='bx bx-log-out' id="log_out" ></i></a>
			</li>
		</ul>
	</div>
	<section class="home-section"> 
		<div id="aa">
			<div class="video">
				<div class="video_title">실시간 냉장고 내부 모습</div>
				<img src="./uploads/food.jpg" height="400px" width="335px">
			</div>
			<div class="refri-object">
				<div class= "refri-name">냉장고 내부 식재료</div>
				<img src="memo.png" alt="" class="list-image">
				<div class="refri-in" id="foodList"></div>
			</div>
			<div id="refri-object2"></div>
		</div>
		<div id="bb">
			<div class="stage">
				<div class="menu_title"><h1>냉장고 내부 식재료를 활용한 메뉴추천</h1></div>
				<div id="menu_list"></div>
				<br>
			</div>
			<div id="recipe_box">
				<div id="recipe_inner">
					<div id="recipe_description"></div>
					<img src="https://img.icons8.com/ios-filled/96/000000/cancel.png" id="exit"/>
				</div>
			</div>
		</div>
	</section>
    <script type="text/javascript" src="./script.js"></script>
    <script>
    $('#aa').show();
    $('#bb').hide();

    food_list_load("./uploads/food_list.txt");

    var object = "";
    var menu = "";

    function food_load(files, picture, menus = "") {
        var file2 = files;
        var rawFile = new XMLHttpRequest();
        rawFile.open("GET", file2, false);
        rawFile.onreadystatechange = function ()
        {
            if(rawFile.readyState === 4)
            {
                if(rawFile.status === 200 || rawFile.status == 0)
                {
                    var allText = rawFile.responseText;
                    if (allText > 0){
                        object += "<div class='O-box'><img src='./object_img/" + picture + "' class='O-img'><div class='number'>" + allText + "</div></div>";
                        menu += menus;
                    }
                }
            }
        }
        rawFile.send(null);
    }

    food_load("./uploads/apple.txt", "apple.png", 
    "<div class='menu'><img src='./menu_recommand/applepancake.jpg' class='menu_image'><div class='menu_description'><p>메뉴이름 : 사과 팬케이크</p><p>활용한 식재료 : 사과</p><p>필요한 식재료 : 밀가루</p><div class='menu_button'><div class='recipe' data-menu='사과팬케이크'>조리법 보기</div><div class='to_kakao' data-menu='사과팬케이크'>조리법 카카오톡으로 전송</div></div></div></div>" );
    food_load("./uploads/banana.txt", "banana.png");
    food_load("./uploads/orange.txt", "apple.png");
    food_load("./uploads/potato.txt", "apple.png");
    food_load("./uploads/broccoli.txt", "broccoli.png");
    food_load("./uploads/cabbage.txt", "apple.png");
    food_load("./uploads/cantaloupe.txt", "apple.png");
    food_load("./uploads/carrot.txt", "apple.png", 
    "<div class='menu'><img src='./menu_recommand/carrotpancake.jpg' class='menu_image'><div class='menu_description'><p>메뉴이름 : 당근전</p><p>활용한 식재료 : 당근</p><p>필요한 식재료 : 밀가루</p><div class='menu_button'><div class='recipe' data-menu='당근전'>조리법 보기</div><div class='to_kakao' data-menu='당근전'>조리법 카카오톡으로 전송</div></div></div></div>" );
    food_load("./uploads/pumpkin.txt", "apple.png");
    food_load("./uploads/tomato.txt", "tomato.png");
    food_load("./uploads/cucumber.txt", "cucumber.png");
    food_load("./uploads/egg.txt", "apple.png", 
    "<div class='menu'><img src='./menu_recommand/eggpancake.jpg' class='menu_image'><div class='menu_description'><p>메뉴이름 : 당면계란전</p><p>활용한 식재료 : 계란</p><p>필요한 식재료 : 당면</p><div class='menu_button'><div class='recipe' data-menu='당면계란전'>조리법 보기</div><div class='to_kakao' data-menu='당면계란전'>조리법 카카오톡으로 전송</div></div></div></div>" );
    food_load("./uploads/grape.txt", "grape.png");
    food_load("./uploads/lemon.txt", "lemon.png", 
    "<div class='menu'><img src='./menu_recommand/lemonade.jpg' class='menu_image'><div class='menu_description'><p>메뉴이름 : 수제레몬청</p><p>활용한 식재료 : 레몬</p><p>필요한 식재료 : 설탕</p><div class='menu_button'><div class='recipe' data-menu='수제레몬청'>조리법 보기</div><div class='to_kakao' data-menu='수제레몬청'>조리법 카카오톡으로 전송</div></div></div></div>" );
    food_load("./uploads/mango.txt", "mango.png");
    food_load("./uploads/mushroom.txt", "apple.png");
    food_load("./uploads/peach.txt", "apple.png");
    food_load("./uploads/pear.txt", "apple.png");
    food_load("./uploads/pineapple.txt", "pineapple.png");

    document.getElementById("refri-object2").innerHTML = object;
    document.getElementById("menu_list").innerHTML = menu;

    var recipes = document.getElementsByClassName("recipe");
    for (i=0; i<recipes.length; i++){
        recipes[i].addEventListener("click", showLightbox);
    }
    var kakao = document.getElementsByClassName("to_kakao");
    for (i=0; i<kakao.length; i++){
        kakao[i].addEventListener("click", sendKakaotalk);
    }

    document.getElementById("exit").onclick = function() {
        document.getElementById("recipe_box").style.display = "none";
    }
    </script>
</body>
</html>