<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="style.css">
    <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
    <script src="http://code.jquery.com/jquery-latest.js"></script> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
   </head>
<body>
  <div class="sidebar">
    <div class="logo-details">
      <i class='bx bx-user icon'></i>
        <div class="logo_name">XXX님</div>
        <i class='bx bx-menu' id="btn" ></i>
    </div>
    <ul class="nav-list">
      <li>
        <button onclick="javascript:doShow1()">
          <i class='bx bx-door-open'></i>
          <span class="links_name">냉장고 내부</span>
        </button>
         <span class="tooltip">냉장고 내부</span>
      </li>
      <li>
        <button onclick="javascript:doShow2()">
          <i class='bx bx-grid-alt'></i>
          <span class="links_name">메뉴 추천</span>
        </button>
       <span class="tooltip">메뉴추천</span>
     </li>
     <li class="profile">
         <div class="profile-details">
           <div class="name_job">
             <div class="name"></div>
             <div class="job"></div>
           </div>
         </div>
         <a href="../index.html"><i class='bx bx-log-out' id="log_out" ></i></a>
     </li>
    </ul>
  </div>
  <section class="home-section"> 
    <div id="aa">
      <div class="video">
        <img src="./uploads/food.jpg" height="400px" width="335px">
      </div>
      <div class="refri-object">
        <div class= "refri-name">냉장고 내부 식재료</div>
        <img src="memo.png" alt="" class="list-image">
        <div class="refri-in" id="foodList"></div>
      </div>
      <div id="refri-object2"></div>
    </div>
    <div id="bb">
      <div class="stage">
        <div class="menu_title"><h1>냉장고 내부 식재료를 활용한 메뉴추천</h1></div>
        <div id="menu_list"></div>
        <br>
      </div>
      <div id="recipe_box"><div id="recipe_inner"><div id="recipe_description"></div><img src="https://img.icons8.com/ios-filled/96/000000/cancel.png" id="exit"/></div></div></div>
    </div>
  </section>
  <script>
  let sidebar = document.querySelector(".sidebar");
  let closeBtn = document.querySelector("#btn");
  let searchBtn = document.querySelector(".bx-search");

  closeBtn.addEventListener("click", ()=>{
    sidebar.classList.toggle("open");
    menuBtnChange();//calling the function(optional)
  });

  searchBtn.addEventListener("click", ()=>{ // Sidebar open when you click on the search iocn
    sidebar.classList.toggle("open");
    menuBtnChange(); //calling the function(optional)
  });

  // following are the code to change sidebar button(optional)
  function menuBtnChange() {
   if(sidebar.classList.contains("open")){
     closeBtn.classList.replace("bx-menu", "bx-menu-alt-right");//replacing the iocns class
   }else {
     closeBtn.classList.replace("bx-menu-alt-right","bx-menu");//replacing the iocns class
   }
  }
  </script>
  <script> 
    $('#aa').show();
    $('#bb').hide();
    function doShow1() { 
        if ($('#aa').is(":visible")) {  
            
        }   
        else {
          $('#bb').hide();
          $('#aa').show(); 
        } 
    } 
    </script>
    <script> 
        function doShow2() { 
            if ($('#bb').is(":visible")) { 
              
            }   
            else { 
              $('#aa').hide(); 
              $('#bb').show(); 
            } 
        } 
    </script>
    <script>
      file = "./uploads/food_list.txt";
      var rawFile = new XMLHttpRequest();
      rawFile.open("GET", file, false);
      rawFile.onreadystatechange = function ()
      {
          if(rawFile.readyState === 4)
          {
              if(rawFile.status === 200 || rawFile.status == 0)
              {
                  var allText = rawFile.responseText;
                  document.getElementById("foodList").innerHTML = allText;
              }
          }
      }
      rawFile.send(null);
    </script>
    <script>
      var object = "";
      var menu = "";

      function food_load(files, picture, menus = "") {
        file = files;
        var rawFile = new XMLHttpRequest();
        rawFile.open("GET", file, false);
        rawFile.onreadystatechange = function ()
        {
            if(rawFile.readyState === 4)
            {
                if(rawFile.status === 200 || rawFile.status == 0)
                {
                    var allText = rawFile.responseText;
                    if (allText > 0){
                      object += "<div class='O-box'><img src='./object_img/" + picture + "' class='O-img'><div class='number'>" + allText + "</div></div>";
                      menu += menus;
                    }
                }
            }
        }
        rawFile.send(null);
      }

      food_load("./uploads/apple.txt", "apple.png", 
      "<div class='menu'><img src='./menu_recommand/applepancake.jpg' class='menu_image'><div class='menu_description'><p>메뉴이름 : 사과 팬케이크</p><p>활용한 식재료 : 사과</p><p>필요한 식재료 : 밀가루</p><div class='menu_button'><div class='recipe' data-menu='사과팬케이크'>조리법 보기</div><div class='to_kakao' data-menu='사과팬케이크'>조리법 카카오톡으로 전송</div></div></div></div>" );

      food_load("./uploads/banana.txt", "banana.png");

      food_load("./uploads/orange.txt", "apple.png");

      food_load("./uploads/potato.txt", "apple.png");

      food_load("./uploads/broccoli.txt", "broccoli.png");

      food_load("./uploads/cabbage.txt", "apple.png");

      food_load("./uploads/cantaloupe.txt", "apple.png");

      food_load("./uploads/carrot.txt", "apple.png", 
      "<div class='menu'><img src='./menu_recommand/carrotpancake.jpg' class='menu_image'><div class='menu_description'><p>메뉴이름 : 당근전</p><p>활용한 식재료 : 당근</p><p>필요한 식재료 : 밀가루</p><div class='menu_button'><div class='recipe' data-menu='당근전'>조리법 보기</div><div class='to_kakao' data-menu='당근전'>조리법 카카오톡으로 전송</div></div></div></div>" );

      food_load("./uploads/pumpkin.txt", "apple.png");

      food_load("./uploads/tomato.txt", "tomato.png");

      food_load("./uploads/cucumber.txt", "cucumber.png");

      food_load("./uploads/egg.txt", "apple.png", 
      "<div class='menu'><img src='./menu_recommand/eggpancake.jpg' class='menu_image'><div class='menu_description'><p>메뉴이름 : 당면계란전</p><p>활용한 식재료 : 계란</p><p>필요한 식재료 : 당면</p><div class='menu_button'><div class='recipe' data-menu='당면계란전'>조리법 보기</div><div class='to_kakao' data-menu='당면계란전'>조리법 카카오톡으로 전송</div></div></div></div>" );

      food_load("./uploads/grape.txt", "grape.png");

      food_load("./uploads/lemon.txt", "lemon.png", 
      "<div class='menu'><img src='./menu_recommand/lemonade.jpg' class='menu_image'><div class='menu_description'><p>메뉴이름 : 수제레몬청</p><p>활용한 식재료 : 레몬</p><p>필요한 식재료 : 설탕</p><div class='menu_button'><div class='recipe' data-menu='수제레몬청'>조리법 보기</div><div class='to_kakao' data-menu='수제레몬청'>조리법 카카오톡으로 전송</div></div></div></div>" );

      food_load("./uploads/mango.txt", "mango.png");

      food_load("./uploads/mushroom.txt", "apple.png");

      food_load("./uploads/peach.txt", "apple.png");

      food_load("./uploads/pear.txt", "apple.png");

      food_load("./uploads/pineapple.txt", "pineapple.png");

      
      document.getElementById("refri-object2").innerHTML = object;
      document.getElementById("menu_list").innerHTML = menu;
    </script>
    <script>
      var recipes = document.getElementsByClassName("recipe");
      for (i=0; i<recipes.length; i++){
        recipes[i].addEventListener("click", showLightbox);
      }

      var kakao = document.getElementsByClassName("to_kakao");
      for (i=0; i<kakao.length; i++){
        kakao[i].addEventListener("click", sendKakaotalk);
      }

      function showLightbox() {
        var menu = this.getAttribute("data-menu");
        if (menu == "수제레몬청"){
          document.getElementById("recipe_description").innerHTML = "<h1>메뉴이름 : 수제레몬청</h><p>수제레몬청은 추운 겨울철에 몸을 녹일 수 있는 최고의 음식입니다.</p><p>조리법 : -</p>";
        }
        else if (menu == "당근전"){
          document.getElementById("recipe_description").innerHTML = "<h1>메뉴이름 : 당근전</h><p>당근전은 당근을 활용한 건강식품으로서 남녀노소가 즐길 수 있습니다.</p><p>조리법 : -</p>";
        }
        else if (menu == "당면계란전"){
          document.getElementById("recipe_description").innerHTML = "<h1>메뉴이름 : 당면계란전</h><p>당면계란전은 당면과 계란을 활용한 이색음식입니다.</p><p>조리법 : -</p>";
        }
        else if (menu == "사과팬케이크"){
          document.getElementById("recipe_description").innerHTML = "<h1>메뉴이름 : 사과팬케이크</h><p>사과팬케이크는 특히 어린이들에게 인기가 좋은 음식입니다.</p><p>조리법 : -</p>";
        }
        document.getElementById("recipe_box").style.display = "block";
      }

      function sendKakaotalk() {
        var menu = this.getAttribute("data-menu");
        if (menu == "수제레몬청"){
          alert("수제레몬청에 대한 조리법을 전송 완료하였습니다.");
        }
        else if (menu == "당근전"){
          alert("당근전에 대한 조리법을 전송 완료하였습니다.");
        }
        else if (menu == "당면계란전"){
          alert("당면계란전에 대한 조리법을 전송 완료하였습니다.");
        }
        else if (menu == "사과팬케이크"){
          alert("사과팬케이크에 대한 조리법을 전송 완료하였습니다.");
        }
      }
  
      document.getElementById("exit").onclick = function() {
        document.getElementById("recipe_box").style.display = "none";
      }
    </script>
</body>
</html>